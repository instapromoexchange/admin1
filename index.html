<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Instapromo Exchange — Full Site</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    :root{--primary:#4361ee;--secondary:#3a0ca3;--accent:#f72585;--light:#f8f9fa;--dark:#111827}
    body{background:#f6f8ff;color:var(--dark);min-height:100vh;display:flex;flex-direction:column;line-height:1.6}
    .container{width:100%;max-width:1200px;margin:0 auto;padding:0 16px}

    header{position:sticky;top:0;z-index:100;background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;box-shadow:0 2px 10px rgba(0,0,0,.1)}
    .header-content{display:flex;align-items:center;justify-content:space-between;padding:10px 0}
    .logo{display:flex;align-items:center;gap:10px;cursor:pointer}
    .logo h1{font-size:1.3rem}
    nav ul{list-style:none;display:flex;gap:14px;align-items:center}
    nav a{color:#fff;text-decoration:none;padding:6px 10px;border-radius:8px;font-weight:600}
    nav a:hover{background:rgba(255,255,255,.18)}

    .floating-menu-btn{position:fixed;right:22px;bottom:22px;width:56px;height:56px;border-radius:50%;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:101;box-shadow:0 12px 28px rgba(67,97,238,.45)}
    .floating-menu-content{position:absolute;right:0;bottom:64px;background:#fff;padding:8px;width:220px;border-radius:12px;box-shadow:0 20px 40px rgba(0,0,0,.18);display:none}
    .floating-menu-content.show{display:block}
    .floating-menu-content a{display:block;padding:10px 12px;border-radius:8px;color:#111827;text-decoration:none}
    .floating-menu-content a:hover{background:#f3f4f6;color:var(--primary)}

    .hero{padding:72px 0;background:linear-gradient(rgba(67,97,238,.92),rgba(58,12,163,.92)),url('https://images.unsplash.com/photo-1533750349088-cd871a92f312?auto=format&fit=crop&w=1770&q=80') center/cover;color:#fff;text-align:center}
    .hero h2{font-size:2.3rem;margin-bottom:10px}
    .btn{display:inline-block;padding:11px 20px;background:var(--accent);color:#fff;border-radius:999px;text-decoration:none;font-weight:800;cursor:pointer;border:0}
    .btn:hover{filter:brightness(.95);transform:translateY(-1px)}
    section{padding:48px 0}
    .section-title{text-align:center;margin-bottom:26px}
    .section-title h2{color:var(--primary);margin-bottom:8px}
    .card{background:#fff;border-radius:14px;box-shadow:0 10px 24px rgba(0,0,0,.08);overflow:hidden}
    .card-header{padding:14px 16px;background:var(--primary);color:#fff}
    .card-body{padding:16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px}
    .stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;margin-bottom:16px}
    .stat{background:#fff;border-radius:12px;padding:16px;text-align:center;box-shadow:0 10px 24px rgba(0,0,0,.08)}
    .stat i{font-size:1.8rem;color:var(--primary);margin-bottom:6px}

    .form{max-width:520px;margin:0 auto;background:#fff;padding:20px;border-radius:14px;box-shadow:0 12px 28px rgba(0,0,0,.08)}
    .fg{margin-bottom:12px}
    .fg label{display:block;font-weight:700;margin-bottom:6px}
    .fc{width:100%;padding:12px 14px;border:1px solid #e5e7eb;border-radius:10px;background:#fff}
    .fc:focus{outline:none;box-shadow:0 0 0 3px rgba(67,97,238,.18)}

    .tabs{display:flex;gap:8px;flex-wrap:wrap;border-bottom:1px solid #e5e7eb;margin-bottom:12px}
    .tab{padding:8px 12px;background:#f3f4f6;border-radius:8px 8px 0 0;cursor:pointer;font-weight:700}
    .tab.active{background:#fff;border:1px solid #e5e7eb;border-bottom:0;color:var(--primary)}
    .tab-content{display:none}
    .tab-content.active{display:block}

    .page{display:none} #home{display:block}

    .brand-card{background:#fff;border-radius:12px;padding:14px;text-align:center;box-shadow:0 8px 20px rgba(0,0,0,.06)}
    .brand-card img{width:72px;height:72px;border-radius:12px;object-fit:cover;margin-bottom:8px}

    .faq{display:grid;gap:10px}
    .faq-item{background:#fff;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,.06);overflow:hidden}
    .faq-q{padding:12px 14px;background:#f3f4f6;cursor:pointer;display:flex;justify-content:space-between;align-items:center;font-weight:800}
    .faq-a{display:none;padding:12px 14px}
    .faq-a.show{display:block}

    .status{display:none;margin:0 auto 14px;max-width:520px;padding:12px 14px;border-radius:10px;font-weight:700}
    .status.show{display:block}
    .status.ok{background:rgba(16,185,129,.14);border:1px solid rgba(16,185,129,.35);color:#065f46}
    .status.err{background:rgba(239,68,68,.12);border:1px solid rgba(239,68,68,.3);color:#7f1d1d}

    footer{margin-top:auto;background:#0b1220;color:#d1d5db}
    .f-wrap{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;padding:28px 0 14px}
    .f-wrap a{color:#d1d5db;text-decoration:none}
    .f-bt{border-top:1px solid rgba(255,255,255,.08);text-align:center;padding:12px 0}
    @media (max-width:768px){nav ul{display:none}}
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container header-content">
      <div class="logo" onclick="showPage('home')">
        <i class="fa-solid fa-exchange-alt"></i><h1>Instapromo Exchange</h1>
      </div>
      <nav>
        <ul id="nav">
          <li><a href="#" data-page="home">Home</a></li>
          <li><a href="#" data-page="brand-promo">Brand Promotion</a></li>
          <li><a href="#" data-page="brands">Brand</a></li>
          <li><a href="#" data-page="earnings">Earning</a></li>
          <li id="nav-login"><a href="#" data-page="login">Login</a></li>
          <li id="nav-signup"><a href="#" data-page="signup">Signup</a></li>
          <li id="nav-profile" style="display:none"><a href="#" data-page="profile">Profile</a></li>
          <li><a href="#" data-page="about">About</a></li>
          <li><a href="#" data-page="how">How it Works</a></li>
          <li><a href="#" data-page="contact">Connect</a></li>
          <li><a href="#" data-page="faq">F&Q</a></li>
          <li id="nav-logout" style="display:none"><a href="#" id="logout">Logout</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Floating Menu -->
  <div class="floating-menu-btn" id="fab">
    <i class="fa-solid fa-bars"></i>
    <div class="floating-menu-content" id="fabMenu">
      <a href="#" data-page="home">Home</a>
      <a href="#" data-page="brand-promo">Brand Promotion</a>
      <a href="#" data-page="brands">Brand</a>
      <a href="#" data-page="earnings">Earning</a>
      <a id="fab-login" href="#" data-page="login">Login</a>
      <a id="fab-signup" href="#" data-page="signup">Signup</a>
      <a id="fab-profile" href="#" data-page="profile" style="display:none">Profile</a>
      <a href="#" data-page="about">About</a>
      <a href="#" data-page="how">How it Works</a>
      <a href="#" data-page="contact">Connect</a>
      <a href="#" data-page="faq">F&Q</a>
      <a id="fab-logout" href="#" style="display:none">Logout</a>
    </div>
  </div>

  <!-- Toast -->
  <div id="status" class="status"></div>

  <!-- Home -->
  <section id="home" class="page">
    <div class="hero">
      <div class="container">
        <h2>Earn Money Promoting Brands</h2>
        <p>Creators + Brands = Real earnings, real reach.</p>
        <a href="#" class="btn" id="cta-earn">Earn Money Now</a>
      </div>
    </div>

    <div class="container" style="padding-top:22px">
      <div class="section-title">
        <h2>Why Instapromo Exchange?</h2>
        <p>Top payouts, easy approvals, fast withdrawals.</p>
      </div>

      <div class="stats">
        <div class="stat"><i class="fa-solid fa-users"></i><h3>10,000+</h3><p>Active Users</p></div>
        <div class="stat"><i class="fa-solid fa-building"></i><h3>500+</h3><p>Brand Partners</p></div>
        <div class="stat"><i class="fa-solid fa-dollar-sign"></i><h3>$250K+</h3><p>Paid Out</p></div>
      </div>

      <div class="section-title"><h2>What creators say</h2><p>Real reviews, real results</p></div>
      <div class="grid">
        <div class="card"><div class="card-body"><b>Sarah J.</b> — “3 months, $5,000+. Smooth!”</div></div>
        <div class="card"><div class="card-body"><b>Michael C.</b> — “15 promos, perfect brand fit.”</div></div>
        <div class="card"><div class="card-body"><b>Jessica W.</b> — “Fast withdrawals, transparent.”</div></div>
      </div>
    </div>
  </section>

  <!-- Login -->
  <section id="login" class="page">
    <div class="container">
      <div class="section-title"><h2>Login</h2><p>Access your dashboard</p></div>
      <div class="form">
        <div class="fg"><label>Email</label><input id="login-email" type="email" class="fc" placeholder="you@example.com"></div>
        <div class="fg"><label>Password</label><input id="login-pass" type="password" class="fc" placeholder="******"></div>
        <button class="btn" style="width:100%" id="btn-login">Login</button>
        <p style="text-align:center;margin-top:10px">New here? <a href="#" data-page="signup" style="color:#3b82f6">Create account</a></p>
      </div>
    </div>
  </section>

  <!-- Signup -->
  <section id="signup" class="page">
    <div class="container">
      <div class="section-title"><h2>Create Account</h2><p>Start earning today</p></div>
      <div class="form">
        <div class="fg"><label>Full Name</label><input id="su-name" class="fc" placeholder="Your name"></div>
        <div class="fg"><label>Social Profile URL</label><input id="su-social" class="fc" placeholder="https://instagram.com/you"></div>
        <div class="fg"><label>Followers</label><input id="su-follows" type="number" class="fc" placeholder="e.g. 15000"></div>
        <div class="fg"><label>Phone</label><input id="su-phone" class="fc" placeholder="+91-XXXXXXXXXX"></div>
        <div class="fg"><label>Email</label><input id="su-email" type="email" class="fc" placeholder="you@example.com"></div>
        <div class="fg"><label>Password</label><input id="su-pass" type="password" class="fc" placeholder="min 6 chars"></div>
        <button class="btn" style="width:100%" id="btn-signup">Sign Up</button>
        <p style="text-align:center;margin-top:10px">Already have an account? <a href="#" data-page="login" style="color:#3b82f6">Login</a></p>
      </div>
    </div>
  </section>

  <!-- Profile -->
  <section id="profile" class="page">
    <div class="container">
      <div class="section-title"><h2>Your Profile</h2><p>Track your stats & manage payouts</p></div>

      <div class="stats">
        <div class="stat"><i class="fa-solid fa-list"></i><h3 id="sub-total">0</h3><p>Total Submissions</p></div>
        <div class="stat"><i class="fa-solid fa-check-circle"></i><h3 id="sub-approved">0</h3><p>Approved</p></div>
        <div class="stat"><i class="fa-solid fa-hourglass-half"></i><h3 id="sub-pending">0</h3><p>Pending</p></div>
        <div class="stat"><i class="fa-solid fa-xmark-circle"></i><h3 id="sub-rejected">0</h3><p>Rejected</p></div>
        <div class="stat"><i class="fa-solid fa-wallet"></i><h3 id="sub-earnings">₹0</h3><p>Earnings</p></div>
      </div>

      <div class="form" style="margin-top:12px">
        <h3 style="text-align:center;margin-bottom:10px">Submit Content</h3>
        <div class="fg"><label>Content Type</label>
          <select id="sub-type" class="fc">
            <option value="">Select</option><option value="reels">Reels</option>
            <option value="video">Video</option><option value="story">Story</option>
          </select>
        </div>
        <div class="fg"><label>Content Link</label><input id="sub-link" class="fc" placeholder="https://..."></div>
        <button class="btn" style="width:100%" id="btn-submit">Submit</button>
      </div>

      <div style="margin-top:24px">
        <div class="tabs" id="p-tabs">
          <div class="tab active" data-tab="tab-withdraw">Withdrawal</div>
          <div class="tab" data-tab="tab-history">Submission History</div>
        </div>

        <div id="tab-withdraw" class="tab-content active">
          <div class="form">
            <div class="tabs" id="w-tabs">
              <div class="tab active" data-tab="w-upi">UPI</div>
              <div class="tab" data-tab="w-bank">Bank</div>
            </div>

            <div id="w-upi" class="tab-content active">
              <div class="fg"><label>Name</label><input id="upi-name" class="fc"></div>
              <div class="fg"><label>UPI ID</label><input id="upi-id" class="fc" placeholder="user@bank"></div>
              <div class="fg"><label>Amount (₹)</label><input id="upi-amt" type="number" class="fc" min="1"></div>
              <button class="btn" style="width:100%" id="btn-w-upi">Withdraw via UPI</button>
            </div>

            <div id="w-bank" class="tab-content">
              <div class="fg"><label>Name</label><input id="bk-name" class="fc"></div>
              <div class="fg"><label>Phone</label><input id="bk-phone" class="fc"></div>
              <div class="fg"><label>Account Number</label><input id="bk-acc" class="fc"></div>
              <div class="fg"><label>IFSC</label><input id="bk-ifsc" class="fc"></div>
              <div class="fg"><label>Amount (₹)</label><input id="bk-amt" type="number" class="fc" min="1"></div>
              <button class="btn" style="width:100%" id="btn-w-bank">Withdraw via Bank</button>
            </div>
          </div>
        </div>

        <div id="tab-history" class="tab-content">
          <div class="form">
            <h3 style="margin-bottom:8px">Your Submission History</h3>
            <div style="overflow:auto">
              <table style="width:100%;border-collapse:collapse">
                <thead>
                  <tr style="background:#f3f4f6">
                    <th style="text-align:left;padding:10px">Date</th>
                    <th style="text-align:left;padding:10px">Type</th>
                    <th style="text-align:left;padding:10px">Status</th>
                    <th style="text-align:left;padding:10px">Earnings</th>
                    <th style="text-align:left;padding:10px">Link</th>
                  </tr>
                </thead>
                <tbody id="hist"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- Brand Promotion -->
  <section id="brand-promo" class="page">
    <div class="container">
      <div class="section-title"><h2>Brand Promotion Campaigns</h2><p>Pick a campaign & earn</p></div>
      <div class="grid" id="promo-grid"></div>
    </div>
  </section>

  <!-- Brands -->
  <section id="brands" class="page">
    <div class="container">
      <div class="section-title"><h2>Brands</h2><p>Our partners</p></div>
      <div class="form" style="margin-bottom:16px">
        <div class="fg"><label>Search</label><input id="brand-search" class="fc" placeholder="Type brand name..."></div>
      </div>
      <div class="grid" id="brand-grid"></div>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="page">
    <div class="container">
      <div class="section-title"><h2>About Instapromo Exchange</h2><p>Creators × Brands = Growth</p></div>
      <div class="card"><div class="card-body">
        <h3>Mission</h3><p style="margin:8px 0 10px">Empower creators with fair earnings and give brands measurable results.</p>
        <h3>Values</h3>
        <ul style="margin-left:18px;list-style:disc">
          <li>Transparency & trust</li>
          <li>Creator-first design</li>
          <li>Data-driven performance</li>
        </ul>
      </div>
    </div>
    <div>
    <section style="text-align: center; padding: 50px 20px;">
      <div style="display: inline-block; background: white; padding: 60px 70px; border-radius: 20px; 
      box-shadow: 0 4px 12px rgba(0,0,0,0.1); max-width: 300px;">
        <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=2864&auto=format&fit=crop" alt="CEO Image"
          style="width: 150px; height: 150px; border-radius: 70%; object-fit: cover; margin-bottom: 15px; border: 4px solid #ff6600;">
        <h3 style="font-size: 22px; margin: 10px 0 5px; font-weight: bold; color: #222;">Rudr Chauhan</h3>
        <p style="font-size: 16px; color: #777; margin: 0;">Founder & CEO</p>
      </div>
    </section>
    </div>
    </div>
  </section>

  <!-- How it Works -->
  <section id="how" class="page">
    <div class="container">
      <div class="section-title"><h2>How It Works</h2><p>4 simple steps</p></div>
      <div class="grid">
        <div class="card"><div class="card-body"><h3>1. Sign Up</h3><p>Add your social profiles.</p></div></div>
        <div class="card"><div class="card-body"><h3>2. Choose Campaign</h3><p>Pick promotions matching your niche.</p></div></div>
        <div class="card"><div class="card-body"><h3>3. Create & Submit</h3><p>Upload your link for review.</p></div></div>
        <div class="card"><div class="card-body"><h3>4. Get Paid</h3><p>Approved → money to your wallet.</p></div></div>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="page">
    <div class="container">
      <div class="section-title"><h2>Connect With Us</h2><p>We reply fast</p></div>
      <div class="form">
        <div class="fg"><label>Your Name</label><input id="c-name" class="fc" placeholder="Your name"></div>
        <div class="fg"><label>Email</label><input id="c-email" type="email" class="fc" placeholder="you@example.com"></div>
        <div class="fg"><label>Subject</label><input id="c-sub" class="fc" placeholder="Subject"></div>
        <div class="fg"><label>Message</label><textarea id="c-msg" class="fc" placeholder="Write your message" rows="4"></textarea></div>
        <button class="btn" style="width:100%" id="btn-contact">Send Message</button>
        <p style="font-size:.9rem;color:#6b7280;margin-top:10px">Message DB में save होगा और (optional) admin email भी भेजा जा सकता है।</p>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="page">
    <div class="container">
      <div class="section-title"><h2>Frequently Asked Questions</h2><p>Everything you need to know</p></div>
      <div class="faq">
        <div class="faq-item">
          <div class="faq-q">How do approvals work? <i class="fa-solid fa-chevron-down"></i></div>
          <div class="faq-a">Submit content link as per brief. Review takes 24–72 hours.</div>
        </div>
        <div class="faq-item">
          <div class="faq-q">When can I withdraw? <i class="fa-solid fa-chevron-down"></i></div>
          <div class="faq-a">Once approved balance is available, request UPI/Bank payout anytime.</div>
        </div>
        <div class="faq-item">
          <div class="faq-q">How are payouts set? <i class="fa-solid fa-chevron-down"></i></div>
          <div class="faq-a">Each campaign has a fixed payout; performance bonuses may apply.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Earnings (sample promos) -->
  <section id="earnings" class="page">
    <div class="container">
      <div class="section-title"><h2>Available Promotions</h2><p>Complete tasks & earn</p></div>
      <div class="grid">
        <div class="card">
          <img src="https://images.unsplash.com/photo-1563013544-824ae1b704d3?auto=format&fit=crop&w=1770&q=80" alt="Nike" style="width:100%;height:180px;object-fit:cover">
          <div class="card-body">
            <h3>Nike Sportswear</h3><p>Create a reel with #JustDoIt & tag @nike</p><p><b>₹6,600</b></p>
            <div style="display:flex;gap:8px"><button class="btn">Copy Link</button><button class="btn">Assets</button></div>
          </div>
        </div>

        <!-- Image ad -->
        <div class="card">
          <img src="https://images.unsplash.com/photo-1605733513597-a8f8341084e6?auto=format&fit=crop&w=1720&q=80" alt="Starbucks" style="width:100%;height:180px;object-fit:cover">
          <div class="card-body">
            <h3>Starbucks Summer</h3><p>Share story with #StarbucksSummer</p><p><b>₹3,700</b></p>
            <div style="display:flex;gap:8px">
              <button class="btn" onclick="copyURL('https://example.com/starbucks-brief')">Copy Link</button>
              <a class="btn" href="https://example.com/yourfile.zip" download>Download</a>
            </div>
          </div>
        </div>

        <!-- 9:16 Video/Reels with poster + download -->
        <div class="card" style="width:350px;border:1px solid #ddd;border-radius:10px;overflow:hidden">
          <video controls style="width:100%;height:400px;object-fit:cover"
                 poster="https://images.unsplash.com/photo-1492707892479-7bc8d5a4ee93?auto=format&fit=crop&w=1770&q=80">
            <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
            Your browser does not support video playback.
          </video>
          <div class="card-body" style="padding:10px">
            <h3>Apple iPhone 14</h3>
            <p>30–60s review video #iPhone14</p>
            <p><b>₹9,900</b></p>
            <div style="display:flex;gap:8px">
              <button class="btn" onclick="copyURL('https://www.w3schools.com/html/mov_bbb.mp4')">Copy Link</button>
              <a class="btn" href="https://www.w3schools.com/html/mov_bbb.mp4" download>Download</a>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="f-wrap">
        <div>
          <h3 style="color:#9ae6b4">Instapromo Exchange</h3>
          <p>Creators meet brands. Win-win.</p>
          <div style="display:flex;gap:10px;margin-top:8px">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
        <div>
          <h3 style="color:#9ae6b4">Quick Links</h3>
          <p><a href="#" data-page="home">Home</a></p>
          <p><a href="#" data-page="earnings">Earning</a></p>
          <p><a href="#" data-page="brand-promo">Brand Promotion</a></p>
          <p><a href="#" data-page="brands">Brand</a></p>
        </div>
        <div>
          <h3 style="color:#9ae6b4">Support</h3>
          <p><a href="#" data-page="about">About</a></p>
          <p><a href="#" data-page="how">How it Works</a></p>
          <p><a href="#" data-page="contact">Connect</a></p>
          <p><a href="#" data-page="faq">F&Q</a></p>
        </div>
      </div>
      <div class="f-bt">&copy; <span id="year"></span> Instapromo Exchange. All rights reserved.</div>
    </div>
  </footer>

  <!-- EmailJS (optional for admin email) -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    // === EmailJS CONFIG (Optional, for admin email) ===
    // Put your keys here to enable admin email:
    const EMAILJS_PUBLIC_KEY = "";      // e.g. "AxXXXXXXyZ123"
    const EMAILJS_SERVICE_ID = "";      // e.g. "service_abc123"
    const EMAILJS_TEMPLATE_ID = "";     // e.g. "template_xyz789"
    if (EMAILJS_PUBLIC_KEY) { try { emailjs.init(EMAILJS_PUBLIC_KEY); } catch(e){} }
  </script>

  <!-- Firebase + App Logic -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
    import {
      getAuth, onAuthStateChanged, createUserWithEmailAndPassword,
      signInWithEmailAndPassword, signOut, updateProfile
    } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";
    import { getDatabase, ref, set, push, onValue } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";

    // ===== Firebase Config (yours) =====
    const firebaseConfig = {
      apiKey: "AIzaSyBm4VTr__mag1trF4jPZCgqt7gWwBItD58",
      authDomain: "exchange-a725e.firebaseapp.com",
      databaseURL: "https://exchange-a725e-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "exchange-a725e",
      storageBucket: "exchange-a725e.firebasestorage.app",
      messagingSenderId: "47165517524",
      appId: "1:47165517524:web:7712aae884de7a498a1541"
    };

    // ===== Init =====
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);
    const $ = s => document.querySelector(s);
    const $$ = s => document.querySelectorAll(s);
    const statusEl = $("#status");
    const toast = (m,t="ok") => { statusEl.textContent=m; statusEl.className="status show "+(t==="ok"?"ok":"err"); setTimeout(()=>statusEl.className="status",3000); };
    const isEmail = v => /^\S+@\S+\.\S+$/.test(v);
    const sz = v => (v||"").toString().trim();
    const showPage = id => { $$(".page").forEach(p=>p.style.display="none"); const el=$("#"+id); if(el){ el.style.display="block"; window.scrollTo({top:0,behavior:"smooth"}); } };

    // Nav wiring
    function wireNav(){ $$("[data-page]").forEach(a=>a.addEventListener("click",(e)=>{ e.preventDefault(); showPage(a.getAttribute("data-page")); closeFab(); })); }
    // FAB
    const fab=$("#fab"), fabMenu=$("#fabMenu"); const closeFab=()=>fabMenu.classList.remove("show");
    fab.addEventListener("click",(e)=>{ e.stopPropagation(); fabMenu.classList.toggle("show"); });
    document.addEventListener("click",(e)=>{ if(!fab.contains(e.target)) closeFab(); });

    // Auth UI toggle
    function navToggle(user){
      const on=!!user;
      $("#nav-login").style.display = on?"none":"list-item";
      $("#nav-signup").style.display = on?"none":"list-item";
      $("#nav-profile").style.display = on?"list-item":"none";
      $("#nav-logout").style.display = on?"list-item":"none";
      $("#fab-login").style.display = on?"none":"block";
      $("#fab-signup").style.display = on?"none":"block";
      $("#fab-profile").style.display = on?"block":"none";
      $("#fab-logout").style.display = on?"block":"none";
    }

    onAuthStateChanged(auth, (user)=>{
      navToggle(user);
      if(user){
        loadStats();       // live stats on profile
        loadHistory();     // history table
      }
    });

    // Logout
    $("#logout").addEventListener("click", async (e)=>{ e.preventDefault(); try{ await signOut(auth); toast("Logged out"); showPage("home"); }catch(err){ toast(err.message,"err"); }});
    $("#fab-logout").addEventListener("click", async (e)=>{ e.preventDefault(); try{ await signOut(auth); toast("Logged out"); showPage("home"); }catch(err){ toast(err.message,"err"); }});

    // Signup
    $("#btn-signup").addEventListener("click", async ()=>{
      const name=sz($("#su-name").value), social=sz($("#su-social").value), followers=parseInt($("#su-follows").value||"0",10);
      const phone=sz($("#su-phone").value), email=sz($("#su-email").value), pass=$("#su-pass").value;
      if(!name||!social||!followers||!phone||!email||!pass) return toast("Fill all fields","err");
      if(!isEmail(email)) return toast("Enter valid email","err");
      if(pass.length<6) return toast("Password min 6 chars","err");
      try{
        const cred=await createUserWithEmailAndPassword(auth,email,pass);
        await updateProfile(cred.user,{displayName:name});
        await set(ref(db,`users/${cred.user.uid}`),{name,social,followers,phone,email,createdAt:Date.now()});
        toast("Signup successful 🎉"); showPage("profile");
      }catch(e){ toast(e.message||"Signup failed","err"); }
    });

    // Login
    $("#btn-login").addEventListener("click", async ()=>{
      const email=sz($("#login-email").value), pass=$("#login-pass").value;
      if(!email||!pass) return toast("Enter email & password","err");
      if(!isEmail(email)) return toast("Enter valid email","err");
      try{ await signInWithEmailAndPassword(auth,email,pass); toast("Logged in"); showPage("profile"); }
      catch(e){ toast(e.message||"Login failed","err"); }
    });

    // CTA
    $("#cta-earn").addEventListener("click",(e)=>{ e.preventDefault(); if(auth.currentUser) showPage("earnings"); else showPage("signup"); });

    // Tabs
    function wireTabs(rootSel){
      const root=document.querySelector(rootSel); if(!root) return;
      root.addEventListener("click",(e)=>{ const t=e.target.closest(".tab"); if(!t) return;
        root.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
        t.classList.add("active");
        const id=t.getAttribute("data-tab");
        const wrap=root.parentElement;
        wrap.querySelectorAll(".tab-content").forEach(x=>x.classList.remove("active"));
        const pane=document.getElementById(id); if(pane) pane.classList.add("active");
      });
    }
    wireTabs("#p-tabs"); wireTabs("#w-tabs");

    // ===== Submissions (Create) =====
    $("#btn-submit").addEventListener("click", async ()=>{
      const u=auth.currentUser; if(!u) return toast("Please login first","err");
      const type=$("#sub-type").value, link=sz($("#sub-link").value);
      if(!type||!link) return toast("Select type & link","err");
      try{
        const node=push(ref(db,`submissions/${u.uid}`));
        await set(node,{type,link,status:"pending",earnings:0,createdAt:Date.now()});
        $("#sub-type").value=""; $("#sub-link").value=""; toast("Submitted for review");
      }catch(e){ toast(e.message||"Submit failed","err"); }
    });

    // ===== Withdrawals =====
    $("#btn-w-upi").addEventListener("click", async ()=>{
      const u=auth.currentUser; if(!u) return toast("Please login first","err");
      const name=sz($("#upi-name").value), upi=sz($("#upi-id").value), amt=parseInt($("#upi-amt").value||"0",10);
      if(!name||!upi||!amt) return toast("Fill all UPI fields","err");
      try{
        const node=push(ref(db,`withdrawals/${u.uid}`));
        await set(node,{method:"upi",name,upiId:upi,amount:amt,status:"requested",createdAt:Date.now()});
        $("#upi-name").value=""; $("#upi-id").value=""; $("#upi-amt").value=""; toast("Withdrawal requested (UPI)");
      }catch(e){ toast(e.message||"Withdrawal failed","err"); }
    });
    $("#btn-w-bank").addEventListener("click", async ()=>{
      const u=auth.currentUser; if(!u) return toast("Please login first","err");
      const name=sz($("#bk-name").value), phone=sz($("#bk-phone").value), acc=sz($("#bk-acc").value), ifsc=sz($("#bk-ifsc").value), amt=parseInt($("#bk-amt").value||"0",10);
      if(!name||!phone||!acc||!ifsc||!amt) return toast("Fill all Bank fields","err");
      try{
        const node=push(ref(db,`withdrawals/${u.uid}`));
        await set(node,{method:"bank",name,phone,account:acc,ifsc,amount:amt,status:"requested",createdAt:Date.now()});
        $("#bk-name").value=""; $("#bk-phone").value=""; $("#bk-acc").value=""; $("#bk-ifsc").value=""; $("#bk-amt").value=""; toast("Withdrawal requested (Bank)");
      }catch(e){ toast(e.message||"Withdrawal failed","err"); }
    });

    // ===== Stats (LIVE) — your snippet integrated =====
    function loadStats(){
      const user=auth.currentUser; if(!user) return;
      const submissionsRef = ref(db, "submissions/" + user.uid);
      onValue(submissionsRef, (snapshot) => {
        let total = 0, approved = 0, pending = 0, rejected = 0, earnings = 0;
        snapshot.forEach((child) => {
          const sub = child.val();
          total++;
          if(sub.status === "approved"){ approved++; earnings += sub.earnings || 0; }
          else if(sub.status === "pending") pending++;
          else if(sub.status === "rejected") rejected++;
        });
        $("#sub-total").innerText = total;
        $("#sub-approved").innerText = approved;
        $("#sub-pending").innerText = pending;
        $("#sub-rejected").innerText = rejected;
        $("#sub-earnings").innerText = "₹"+earnings;
      });
    }

    // ===== History Table =====
    function fmt(ts){ const d=new Date(ts||Date.now()); return d.toISOString().split("T")[0]; }
    function loadHistory(){
      const u=auth.currentUser; if(!u) return;
      const body=$("#hist"); onValue(ref(db,`submissions/${u.uid}`),(snap)=>{
        body.innerHTML=""; const rows=[]; snap.forEach(ch=>rows.push(ch.val())); rows.sort((a,b)=>(b.createdAt||0)-(a.createdAt||0));
        rows.forEach(v=>{
          const tr=document.createElement("tr"); tr.style.borderBottom="1px solid #eee";
          const clr=v.status==="approved"?"#059669":v.status==="rejected"?"#b91c1c":"#b45309";
          tr.innerHTML=`<td style="padding:10px">${fmt(v.createdAt)}</td>
            <td style="padding:10px">${v.type||"-"}</td>
            <td style="padding:10px;color:${clr}">${v.status||"pending"}</td>
            <td style="padding:10px">₹${v.earnings||0}</td>
            <td style="padding:10px;word-break:break-all"><a href="${v.link||'#'}" target="_blank" rel="noopener">open</a></td>`;
          body.appendChild(tr);
        });
      });
    }

    // ===== Brand Promotion (sample) =====
    const promos=[
      {t:"Adidas Originals",p:9000,b:"Reel with @adidas @originals",img:"https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&w=1770&q=80"},
      {t:"OnePlus Nord",p:11000,b:"Unbox & review (battery/camera)",img:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?auto=format&fit=crop&w=1770&q=80"},
      {t:"Coca-Cola Fest",p:4000,b:"IG story at a fest",img:"https://images.unsplash.com/photo-1613478223719-2ab802602423?auto=format&fit=crop&w=1770&q=80"},
      {t:"Noise Smartwatch",p:5500,b:"30s day-in-life reel",img:"https://images.unsplash.com/photo-1518081461904-9ac6b0c7532a?auto=format&fit=crop&w=1770&q=80"}
    ];
    function renderPromos(){
      const g=$("#promo-grid"); g.innerHTML="";
      promos.forEach(c=>{
        const el=document.createElement("div"); el.className="card";
        el.innerHTML=`<img src="${c.img}" style="width:100%;height:160px;object-fit:cover" alt="${c.t}">
          <div class="card-body"><h3>${c.t}</h3><p style="margin:6px 0 10px">${c.b}</p><p><b>₹${c.p.toLocaleString()}</b></p>
          <div style="display:flex;gap:8px"><button class="btn" onclick="copyURL('https://example.com/brief')">View Brief</button><button class="btn">Apply</button></div></div>`;
        g.appendChild(el);
      });
    }

    // ===== Brands (sample) =====
    const brands=[{n:"Nike",img:"https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?auto=format&fit=crop&w=400&q=60"},
                  {n:"Adidas",img:"https://images.unsplash.com/photo-1556905055-8f358a7a47b2?auto=format&fit=crop&w=400&q=60"},
                  {n:"Starbucks",img:"https://images.unsplash.com/photo-1517705008128-361805f42e86?auto=format&fit=crop&w=400&q=60"},
                  {n:"Apple",img:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&fit=crop&w=400&q=60"},
                  {n:"OnePlus",img:"https://images.unsplash.com/photo-1615880141936-60796ae4dc80?auto=format&fit=crop&w=400&q=60"},
                  {n:"Noise",img:"https://images.unsplash.com/photo-1518081461904-9ac6b0c7532a?auto=format&fit=crop&w=400&q=60"}];
    function renderBrands(filter=""){
      const g=$("#brand-grid"); g.innerHTML="";
      brands.filter(b=>b.n.toLowerCase().includes(filter.toLowerCase())).forEach(b=>{
        const el=document.createElement("div"); el.className="brand-card";
        el.innerHTML=`<img src="${b.img}" alt="${b.n}"><h3>${b.n}</h3>
          <p style="font-size:.95rem;color:#6b7280">Active promotions: ${Math.floor(Math.random()*4)+1}</p>`;
        g.appendChild(el);
      });
    }
    $("#brand-search").addEventListener("input",(e)=>renderBrands(e.target.value));

    // ===== Contact (DB + optional EmailJS) =====
    $("#btn-contact").addEventListener("click", async ()=>{
      const name=sz($("#c-name").value), email=sz($("#c-email").value), sub=sz($("#c-sub").value), msg=sz($("#c-msg").value);
      if(!name||!email||!sub||!msg) return toast("Please fill all contact fields","err");
      if(!isEmail(email)) return toast("Enter valid email","err");
      try{
        const user=auth.currentUser, group=user?user.uid:"anonymous";
        const node=push(ref(db,`contactMessages/${group}`));
        await set(node,{name,email,subject:sub,message:msg,createdAt:Date.now()});
        // Optional EmailJS
        if (window.emailjs && EMAILJS_PUBLIC_KEY && EMAILJS_SERVICE_ID && EMAILJS_TEMPLATE_ID){
          try{
            await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {
              from_name:name, from_email:email, subject:sub, message:msg,
              to_email: "rudrchauhan877@gmail.com"
            });
          }catch(e){ console.warn("EmailJS send failed:", e); }
        }
        $("#c-name").value=""; $("#c-email").value=""; $("#c-sub").value=""; $("#c-msg").value="";
        toast("Message sent! We’ll get back soon.");
      }catch(e){ toast(e.message||"Message failed","err"); }
    });

    // FAQ toggle
    $$(".faq-q").forEach(q=>q.addEventListener("click",()=>{ const a=q.nextElementSibling; a.classList.toggle("show"); }));

    // Init
    (function init(){
      $("#year").textContent=new Date().getFullYear();
      wireNav(); showPage("home"); renderPromos(); renderBrands();
    })();

    // ===== Recommended Realtime Database Rules (console) =====
    // {
    //   "rules": {
    //     "users": { "$uid": { ".read": "$uid === auth.uid", ".write": "$uid === auth.uid" } },
    //     "submissions": { "$uid": { ".read": "$uid === auth.uid", ".write": "$uid === auth.uid" } },
    //     "withdrawals": { "$uid": { ".read": "$uid === auth.uid", ".write": "$uid === auth.uid" } },
    //     "contactMessages": {
    //       "$group": {
    //         ".read": false,
    //         ".write": true,
    //         "$msgId": { ".validate": "newData.hasChildren(['name','email','subject','message','createdAt'])" }
    //       }
    //     }
    //   }
    // }
  </script>

  <script>
    // global helpers (non-module)
    function copyURL(url){
      navigator.clipboard.writeText(url)
        .then(()=>console.log("URL copied"))
        .catch(err=>console.error("Failed to copy:", err));
    }
  </script>
</body>
</html>